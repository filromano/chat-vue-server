(function(t){function e(e){for(var n,o,i=e[0],c=e[1],u=e[2],d=0,p=[];d<i.length;d++)o=i[d],a[o]&&p.push(a[o][0]),a[o]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);l&&l(e);while(p.length)p.shift()();return r.push.apply(r,u||[]),s()}function s(){for(var t,e=0;e<r.length;e++){for(var s=r[e],n=!0,i=1;i<s.length;i++){var c=s[i];0!==a[c]&&(n=!1)}n&&(r.splice(e--,1),t=o(o.s=s[0]))}return t}var n={},a={app:0},r=[];function o(e){if(n[e])return n[e].exports;var s=n[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.m=t,o.c=n,o.d=function(t,e,s){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(o.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(s,n,function(e){return t[e]}.bind(null,n));return s},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=e,i=i.slice();for(var u=0;u<i.length;u++)e(i[u]);var l=c;r.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"44b9":function(t,e,s){"use strict";var n=s("f416"),a=s.n(n);a.a},"56d7":function(t,e,s){"use strict";s.r(e);s("cadf"),s("551c"),s("f751"),s("097d");var n=s("2b0e"),a=s("bc3a"),r=s.n(a),o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("div",{staticClass:"container"},[s("router-view")],1)])},i=[],c=(s("5c0b"),s("2877")),u={},l=Object(c["a"])(u,o,i,!1,null,null,null),d=l.exports,p=s("8c4f"),h=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.notStarted?s("h2",{staticClass:"mb-5"},[t._v("Welcome, which chat would you like to try?")]):t._e(),t.notStarted?s("app-choose",{attrs:{notStarted:t.notStarted}}):s("app-chat")],1)},f=[],m=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row",staticStyle:{"margin-bottom":"10px"}},[s("div",{staticClass:"col-sm"},[s("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.startStoreChat}},[t._v("Start Store Chat")])]),s("div",{staticClass:"col-sm"},[s("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.startExampleChat}},[t._v("Start Example Chat")])])])},g=[],v={methods:{startStoreChat:function(){this.$store.commit("startChat","store")},startExampleChat:function(){this.$store.commit("startChat","example")}}},y=v,b=Object(c["a"])(y,m,g,!1,null,null,null),w=b.exports,C=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row"},[s("div",{staticClass:"col-sm"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-sm"},[s("div",{staticClass:"list-group",attrs:{id:"chatbox"}},t._l(t.arrayMensagens,function(e){return s("div",{key:e.index},["chatbot"===e.type?s("span",{staticClass:"list-group-item list-group-item-primary"},[t._v(t._s(e.text))]):t._e(),"user"===e.type?s("span",{staticClass:"list-group-item list-group-item-success"},[t._v(t._s(e.text))]):t._e()])}),0)])]),s("div",{staticClass:"row",staticStyle:{"margin-bottom":"10px"}},[s("div",{staticClass:"col-sm"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.message,expression:"message"}],staticClass:"form-control form-control-lg",attrs:{type:"text"},domProps:{value:t.message},on:{keyup:function(e){return"keyCode"in e&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.sendMessage(e)},input:function(e){e.target.composing||(t.message=e.target.value)}}})])]),s("div",{staticClass:"row",staticStyle:{"margin-bottom":"10px"}},[s("div",{staticClass:"col-sm"},[s("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:t.sendMessage}},[t._v("Send")])])])]),s("div",{staticClass:"col-sm"},[s("transition",{attrs:{name:"fade"}},[""!=t.id?s("div",{staticClass:"card",staticStyle:{width:"70%",margin:"auto"}},[s("div",{staticClass:"card-body"},[s("div",{staticClass:"card-text"},[s("p",[t._v(t._s(t.ticket)),s("br"),t._v("Link: "),s("a",{attrs:{href:t.ticketLink}},[t._v(t._s(t.ticketLink))])])])])]):t._e()])],1)])},k=[],x=(s("96cf"),s("3b8d")),_={data:function(){return{message:""}},methods:{scrollTop:function(){this.$nextTick(function(){var t=document.getElementById("chatbox");t.scrollTop=t.scrollHeight})},sendMessage:function(){var t=Object(x["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.$store.commit("addUserMessage",this.message),this.scrollTop(),t.next=4,this.$store.dispatch("sendMessage",this.message);case 4:this.scrollTop(),this.message="";case 6:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},computed:{sessionId:function(){return this.$store.getters.sessionId},arrayMensagens:function(){return this.$store.getters.arrayMensagens},chatbotType:function(){return this.$store.getters.chatTypeStore},ticketLink:function(){return"http://localhost:1337/orders/"+this.id},ticket:function(){return this.$store.getters.ticketMessage},id:function(){return this.$store.getters.ticketId}},created:function(){console.log("comecar o chat"),console.log(this.$store.getters.getToken),this.$store.dispatch("startChat",this.message)}},S=_,M=(s("44b9"),Object(c["a"])(S,C,k,!1,null,null,null)),T=M.exports,j={data:function(){return{}},computed:{notStarted:function(){return this.$store.getters.chatState}},components:{appChoose:w,appChat:T}},$=j,I=Object(c["a"])($,h,f,!1,null,null,null),O=I.exports;n["a"].use(p["a"]);var E=new p["a"]({mode:"history",routes:[{path:"/",name:"chat",component:O}]}),P=s("795b"),L=s.n(P),J=s("2f62");n["a"].use(J["a"]);var N=new J["a"].Store({state:{jwt:"",chatNotStarted:!0,sessionId:"",arrayMensagens:[],chatType:"",error:[],ticket:"",id:""},getters:{sessionId:function(t){return t.sessionId},userInfo:function(t){return t.userInfo},chatState:function(t){return t.chatNotStarted},chatTypeStore:function(t){return t.chatType},getToken:function(t){return t.jwt},arrayMensagens:function(t){return t.arrayMensagens},ticketMessage:function(t){return t.ticket},ticketId:function(t){return t.id}},mutations:{newSession:function(t,e){t.sessionId=e},addChatbotMessage:function(t,e){t.arrayMensagens.push({type:"chatbot",text:e})},addUserMessage:function(t,e){t.arrayMensagens.push({type:"user",text:e})},startChat:function(t,e){t.chatNotStarted=!1,t.chatType=e},newJwt:function(t,e){t.jwt=e},addError:function(t,e){t.error.push(e)},createTicket:function(t,e){var s=e.ticket,n=e.id;t.ticket=s,t.id=n}},actions:{startChat:function(t,e){var s=t.commit,n=t.state;r.a.post("/conversation",{info:{sessionId:n.sessionId,message:e,chatbotType:n.chatType}},{headers:{"x-auth-token":n.jwt}}).then(function(t){s("newSession",t.data.sessionId),s("addChatbotMessage",t.data.text)}).catch(function(t){s("addError",t)})},sendMessage:function(t,e){var s=t.commit,n=t.state;return new L.a(function(t,a){r.a.post("/conversation",{info:{sessionId:n.sessionId,message:e,chatbotType:n.chatType}},{headers:{"x-auth-token":n.jwt}}).then(function(e){if(s("addChatbotMessage",e.data.text),"order"===e.data.action){var n="A ticket was opened with your order",a=e.data.data;s("createTicket",{message:n,id:a})}t()}).catch(function(t){s("addError",t),a()})})}}});n["a"].config.productionTip=!1,r.a.defaults.baseURL="https://chat-api-filiperr-testing.mybluemix.net",r.a.defaults.headers.common={"Content-Type":"application/json"},E.beforeEach(function(t,e,s){console.log("https://chat-api-filiperr-testing.mybluemix.net"),console.log("http://localhost:1337");var n=new URL(window.location.href),a=n.searchParams.get("token");a&&N.commit("newJwt",a),""===N.getters.getToken?window.location.href="https://chat-api-filiperr-testing.mybluemix.net/user":s()}),new n["a"]({router:E,store:N,render:function(t){return t(d)}}).$mount("#app")},"5c0b":function(t,e,s){"use strict";var n=s("5e27"),a=s.n(n);a.a},"5e27":function(t,e,s){},f416:function(t,e,s){}});
//# sourceMappingURL=app.873253eb.js.map