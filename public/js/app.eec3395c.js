(function(t){function e(e){for(var s,o,i=e[0],c=e[1],u=e[2],d=0,p=[];d<i.length;d++)o=i[d],a[o]&&p.push(a[o][0]),a[o]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(t[s]=c[s]);l&&l(e);while(p.length)p.shift()();return r.push.apply(r,u||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],s=!0,i=1;i<n.length;i++){var c=n[i];0!==a[c]&&(s=!1)}s&&(r.splice(e--,1),t=o(o.s=n[0]))}return t}var s={},a={app:0},r=[];function o(e){if(s[e])return s[e].exports;var n=s[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=s,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)o.d(n,s,function(e){return t[e]}.bind(null,s));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=e,i=i.slice();for(var u=0;u<i.length;u++)e(i[u]);var l=c;r.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"44b9":function(t,e,n){"use strict";var s=n("f416"),a=n.n(s);a.a},"56d7":function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("f751"),n("097d");var s=n("2b0e"),a=n("bc3a"),r=n.n(a),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("div",{staticClass:"container"},[n("router-view")],1)])},i=[],c=(n("5c0b"),n("2877")),u={},l=Object(c["a"])(u,o,i,!1,null,null,null),d=l.exports,p=n("8c4f"),h=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.notStarted?n("h2",{staticClass:"mb-5"},[t._v("Welcome, which chat would you like to try?")]):t._e(),t.notStarted?n("app-choose",{attrs:{notStarted:t.notStarted}}):n("app-chat")],1)},f=[],m=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"row",staticStyle:{"margin-bottom":"10px"}},[n("div",{staticClass:"col-sm"},[n("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.startStoreChat}},[t._v("Start Store Chat")])]),n("div",{staticClass:"col-sm"},[n("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.startExampleChat}},[t._v("Start Example Chat")])])])},g=[],v={methods:{startStoreChat:function(){this.$store.commit("startChat","store")},startExampleChat:function(){this.$store.commit("startChat","example")}}},y=v,b=Object(c["a"])(y,m,g,!1,null,null,null),w=b.exports,C=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"row"},[n("div",{staticClass:"col-sm"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-sm"},[n("div",{staticClass:"list-group",attrs:{id:"chatbox"}},t._l(t.arrayMensagens,function(e){return n("div",{key:e.index},["chatbot"===e.type?n("span",{staticClass:"list-group-item list-group-item-primary"},[t._v(t._s(e.text))]):t._e(),"user"===e.type?n("span",{staticClass:"list-group-item list-group-item-success"},[t._v(t._s(e.text))]):t._e()])}),0)])]),n("div",{staticClass:"row",staticStyle:{"margin-bottom":"10px"}},[n("div",{staticClass:"col-sm"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.message,expression:"message"}],staticClass:"form-control form-control-lg",attrs:{type:"text"},domProps:{value:t.message},on:{keyup:function(e){return"keyCode"in e&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.sendMessage(e)},input:function(e){e.target.composing||(t.message=e.target.value)}}})])]),n("div",{staticClass:"row",staticStyle:{"margin-bottom":"10px"}},[n("div",{staticClass:"col-sm"},[n("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:t.sendMessage}},[t._v("Send")])])])]),n("div",{staticClass:"col-sm"},[n("transition",{attrs:{name:"fade"}},[""!=t.id?n("div",{staticClass:"card",staticStyle:{width:"70%",margin:"auto"}},[n("div",{staticClass:"card-body"},[n("div",{staticClass:"card-text"},[n("p",[t._v(t._s(t.ticket)),n("br"),t._v("Link: "),n("a",{attrs:{href:t.ticketLink}},[t._v(t._s(t.ticketLink))])])])])]):t._e()])],1)])},k=[],x=(n("96cf"),n("3b8d")),_={data:function(){return{message:""}},methods:{scrollTop:function(){this.$nextTick(function(){var t=document.getElementById("chatbox");t.scrollTop=t.scrollHeight})},sendMessage:function(){var t=Object(x["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.$store.commit("addUserMessage",this.message),this.scrollTop(),t.next=4,this.$store.dispatch("sendMessage",this.message);case 4:this.scrollTop(),this.message="";case 6:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},computed:{sessionId:function(){return this.$store.getters.sessionId},arrayMensagens:function(){return this.$store.getters.arrayMensagens},chatbotType:function(){return this.$store.getters.chatTypeStore},ticketLink:function(){return"https://chat-api-filiperr-testing.mybluemix.net/order/"+this.id},ticket:function(){return this.$store.getters.ticketMessage},id:function(){return this.$store.getters.ticketId}},created:function(){console.log("comecar o chat"),console.log(this.$store.getters.getToken),this.$store.dispatch("startChat",this.message)}},S=_,M=(n("44b9"),Object(c["a"])(S,C,k,!1,null,null,null)),T=M.exports,j={data:function(){return{}},computed:{notStarted:function(){return this.$store.getters.chatState}},components:{appChoose:w,appChat:T}},$=j,I=Object(c["a"])($,h,f,!1,null,null,null),O=I.exports;s["a"].use(p["a"]);var E=new p["a"]({mode:"history",routes:[{path:"/",name:"chat",component:O}]}),P=n("795b"),L=n.n(P),J=n("2f62");s["a"].use(J["a"]);var N=new J["a"].Store({state:{jwt:"",chatNotStarted:!0,sessionId:"",arrayMensagens:[],chatType:"",error:[],ticket:"",id:""},getters:{sessionId:function(t){return t.sessionId},userInfo:function(t){return t.userInfo},chatState:function(t){return t.chatNotStarted},chatTypeStore:function(t){return t.chatType},getToken:function(t){return t.jwt},arrayMensagens:function(t){return t.arrayMensagens},ticketMessage:function(t){return t.ticket},ticketId:function(t){return t.id}},mutations:{newSession:function(t,e){t.sessionId=e},addChatbotMessage:function(t,e){t.arrayMensagens.push({type:"chatbot",text:e})},addUserMessage:function(t,e){t.arrayMensagens.push({type:"user",text:e})},startChat:function(t,e){t.chatNotStarted=!1,t.chatType=e},newJwt:function(t,e){t.jwt=e},addError:function(t,e){t.error.push(e)},createTicket:function(t,e){var n=e.ticket,s=e.id;t.ticket=n,t.id=s}},actions:{startChat:function(t,e){var n=t.commit,s=t.state;r.a.post("/conversation",{info:{sessionId:s.sessionId,message:e,chatbotType:s.chatType}},{headers:{"x-auth-token":s.jwt}}).then(function(t){n("newSession",t.data.sessionId),n("addChatbotMessage",t.data.text)}).catch(function(t){n("addError",t)})},sendMessage:function(t,e){var n=t.commit,s=t.state;return new L.a(function(t,a){r.a.post("/conversation",{info:{sessionId:s.sessionId,message:e,chatbotType:s.chatType}},{headers:{"x-auth-token":s.jwt}}).then(function(e){if(n("addChatbotMessage",e.data.text),"order"===e.data.action){var s="A ticket was opened with your order",a=e.data.data;n("createTicket",{message:s,id:a})}t()}).catch(function(t){n("addError",t),a()})})}}});s["a"].config.productionTip=!1,r.a.defaults.baseURL="https://chat-api-filiperr-testing.mybluemix.net",r.a.defaults.headers.common={"Content-Type":"application/json"},E.beforeEach(function(t,e,n){console.log("https://chat-api-filiperr-testing.mybluemix.net");var s=new URL(window.location.href),a=s.searchParams.get("token");a&&N.commit("newJwt",a),""===N.getters.getToken?window.location.href="https://chat-api-filiperr-testing.mybluemix.net/user":n()}),new s["a"]({router:E,store:N,render:function(t){return t(d)}}).$mount("#app")},"5c0b":function(t,e,n){"use strict";var s=n("5e27"),a=n.n(s);a.a},"5e27":function(t,e,n){},f416:function(t,e,n){}});
//# sourceMappingURL=app.eec3395c.js.map